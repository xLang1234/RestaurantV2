"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createDefaultLogger = void 0;
const tslib_1 = require("tslib");
const colors_1 = require("./colors");
const logger_1 = require("./logger");
const output_1 = require("./output");
tslib_1.__exportStar(require("./colors"), exports);
tslib_1.__exportStar(require("./format"), exports);
tslib_1.__exportStar(require("./logger"), exports);
tslib_1.__exportStar(require("./output"), exports);
tslib_1.__exportStar(require("./tasks"), exports);
/**
 * Creates a logger instance with good defaults.
 */
function createDefaultLogger({ output = new output_1.StreamOutputStrategy({ colors: colors_1.NO_COLORS, stream: process.stdout }), formatterOptions } = {}) {
    const { weak } = output.colors;
    const prefix = process.argv.includes('--log-timestamps') ? () => `${weak('[' + new Date().toISOString() + ']')}` : '';
    const formatter = logger_1.createTaggedFormatter({ colors: output.colors, prefix, titleize: true, wrap: true, ...formatterOptions });
    const handlers = new Set([new logger_1.StreamHandler({ stream: output.stream, formatter })]);
    return new logger_1.Logger({ handlers });
}
exports.createDefaultLogger = createDefaultLogger;
